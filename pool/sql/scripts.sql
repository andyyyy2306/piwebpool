-- phpMyAdmin SQL Dump
-- version 4.2.12deb2+deb8u2
-- http://www.phpmyadmin.net
--
-- Client :  localhost
-- Généré le :  Mer 03 Août 2016 à 22:22
-- Version du serveur :  5.5.44-0+deb8u1
-- Version de PHP :  5.6.24-0+deb8u1

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Base de données :  `pool`
--

-- --------------------------------------------------------

--
-- Structure de la table `scripts`
--

DROP TABLE IF EXISTS `scripts`;
CREATE TABLE IF NOT EXISTS `scripts` (
  `id` varchar(255) NOT NULL,
  `xml` text NOT NULL,
  `lua` text NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Contenu de la table `scripts`
--

INSERT INTO `scripts` (`id`, `xml`, `lua`) VALUES
('custom', '&lt;xml xmlns="http://www.w3.org/1999/xhtml"&gt;&lt;/xml&gt;', ''),
('footer', '', '    persistence.store("storage.lua", memoire);\n    return info; \nend'),
('header', '', 'local write, writeIndent, writers, refCount;\n\npersistence =\n{\n	store = function (path, ...)\n		local file, e = io.open(path, "w");\n		if not file then\n			return error(e);\n		end\n		local n = select("#", ...);\n		-- Count references\n		local objRefCount = {}; -- Stores reference that will be exported\n		for i = 1, n do\n			refCount(objRefCount, (select(i,...)));\n		end;\n		-- Export Objects with more than one ref and assign name\n		-- First, create empty tables for each\n		local objRefNames = {};\n		local objRefIdx = 0;\n		file:write("-- Persistent Data\\n");\n		file:write("local multiRefObjects = {\\n");\n		for obj, count in pairs(objRefCount) do\n			if count > 1 then\n				objRefIdx = objRefIdx + 1;\n				objRefNames[obj] = objRefIdx;\n				file:write("{};"); -- table objRefIdx\n			end;\n		end;\n		file:write("\\n} -- multiRefObjects\\n");\n		-- Then fill them (this requires all empty multiRefObjects to exist)\n		for obj, idx in pairs(objRefNames) do\n			for k, v in pairs(obj) do\n				file:write("multiRefObjects["..idx.."][");\n				write(file, k, 0, objRefNames);\n				file:write("] = ");\n				write(file, v, 0, objRefNames);\n				file:write(";\\n");\n			end;\n		end;\n		-- Create the remaining objects\n		for i = 1, n do\n			file:write("local ".."obj"..i.." = ");\n			write(file, (select(i,...)), 0, objRefNames);\n			file:write("\\n");\n		end\n		-- Return them\n		if n > 0 then\n			file:write("return obj1");\n			for i = 2, n do\n				file:write(" ,obj"..i);\n			end;\n			file:write("\\n");\n		else\n			file:write("return\\n");\n		end;\n		if type(path) == "string" then\n			file:close();\n		end;\n	end;\n\n	load = function (path)\n		local f, e;\n		if type(path) == "string" then\n			f, e = loadfile(path);\n		else\n			f, e = path:read(''*a'')\n		end\n		if f then\n			return f();\n		else\n			return nil, e;\n		end;\n	end;\n}\n\n-- Private methods\n\n-- write thing (dispatcher)\nwrite = function (file, item, level, objRefNames)\n	writers[type(item)](file, item, level, objRefNames);\nend;\n\n-- write indent\nwriteIndent = function (file, level)\n	for i = 1, level do\n		file:write("\\t");\n	end;\nend;\n\n-- recursively count references\nrefCount = function (objRefCount, item)\n	-- only count reference types (tables)\n	if type(item) == "table" then\n		-- Increase ref count\n		if objRefCount[item] then\n			objRefCount[item] = objRefCount[item] + 1;\n		else\n			objRefCount[item] = 1;\n			-- If first encounter, traverse\n			for k, v in pairs(item) do\n				refCount(objRefCount, k);\n				refCount(objRefCount, v);\n			end;\n		end;\n	end;\nend;\n\n-- Format items for the purpose of restoring\nwriters = {\n	["nil"] = function (file, item)\n			file:write("nil");\n		end;\n	["number"] = function (file, item)\n			file:write(tostring(item));\n		end;\n	["string"] = function (file, item)\n			file:write(string.format("%q", item));\n		end;\n	["boolean"] = function (file, item)\n			if item then\n				file:write("true");\n			else\n				file:write("false");\n			end\n		end;\n	["table"] = function (file, item, level, objRefNames)\n			local refIdx = objRefNames[item];\n			if refIdx then\n				-- Table with multiple references\n				file:write("multiRefObjects["..refIdx.."]");\n			else\n				-- Single use table\n				file:write("{\\n");\n				for k, v in pairs(item) do\n					writeIndent(file, level+1);\n					file:write("[");\n					write(file, k, level+1, objRefNames);\n					file:write("] = ");\n					write(file, v, level+1, objRefNames);\n					file:write(";\\n");\n				end\n				writeIndent(file, level);\n				file:write("}");\n			end;\n		end;\n	["function"] = function (file, item)\n			-- Does only work for "normal" functions, not those\n			-- with upvalues or c functions\n			local dInfo = debug.getinfo(item, "uS");\n			if dInfo.nups > 0 then\n				file:write("nil --[[functions with upvalue not supported]]");\n			elseif dInfo.what ~= "Lua" then\n				file:write("nil --[[non-lua function not supported]]");\n			else\n				local r, s = pcall(string.dump,item);\n				if r then\n					file:write(string.format("loadstring(%q)", s));\n				else\n					file:write("nil --[[function could not be dumped]]");\n				end\n			end\n		end;\n	["thread"] = function (file, item)\n			file:write("nil --[[thread]]\\n");\n		end;\n	["userdata"] = function (file, item)\n			file:write("nil --[[userdata]]\\n");\n		end;\n}\n\nmemoire = persistence.load("storage.lua");\n\nfunction run()\n    info="OK";'),
('main', '&lt;xml xmlns="http://www.w3.org/1999/xhtml"&gt;&lt;block type="variables_set" id="]Q]FFi:1jh8|F*Hcq:0." x="71" y="-5"&gt;&lt;field name="VAR"&gt;warning&lt;/field&gt;&lt;value name="VALUE"&gt;&lt;block type="text" id="Pr?YDG.2p*n]qml(Dv/-"&gt;&lt;field name="TEXT"&gt;.&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;next&gt;&lt;block type="variables_set" id="%2uSiy25?^`R{:VmPhR4"&gt;&lt;field name="VAR"&gt;mesures&lt;/field&gt;&lt;value name="VALUE"&gt;&lt;block type="text_join" id="?crd{,VWI]Ka{HeU)t_P"&gt;&lt;mutation items="6"&gt;&lt;/mutation&gt;&lt;value name="ADD0"&gt;&lt;block type="text" id="^}}b2WFE_5`sgN(L;)Uh"&gt;&lt;field name="TEXT"&gt;Ph: &lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="ADD1"&gt;&lt;block type="dynamicData" id="uO9;u-`(vtG%[Qn/t[dC"&gt;&lt;field name="select"&gt;ph&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="ADD2"&gt;&lt;block type="text" id="~b2Yy0kVQ}bZ`*inE6by"&gt;&lt;field name="TEXT"&gt;, ORP: &lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="ADD3"&gt;&lt;block type="dynamicData" id="rRC1Yg(JQqBSX2I`yn*L"&gt;&lt;field name="select"&gt;orp&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="ADD4"&gt;&lt;block type="text" id="+J~*8d,#gv3PRhvx}G9q"&gt;&lt;field name="TEXT"&gt;, temp&eacute;rature:&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="ADD5"&gt;&lt;block type="dynamicData" id="fNpY]+Wfcb:dK*MzB-hq"&gt;&lt;field name="select"&gt;temperature&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;next&gt;&lt;block type="controls_if" id="W}@MYJ3^-e+T,6{s}d}x"&gt;&lt;value name="IF0"&gt;&lt;block type="logic_operation" id="o0WWs?]xB,@ZKzg.CZ1Q"&gt;&lt;field name="OP"&gt;AND&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="logic_compare" id="xNOM`#)7-Qlya1)nZ_3{"&gt;&lt;field name="OP"&gt;EQ&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="getcommand" id="P/A=W3V8QTW=r+e[Zi4m"&gt;&lt;field name="command"&gt;filtration&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="on_off" id="w}TCWtfkv45lu(/af[Rh"&gt;&lt;field name="command"&gt;On&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="logic_operation" id="fIn140v!?IV[;cEuap%r"&gt;&lt;field name="OP"&gt;OR&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="logic_compare" id="f]PpYr3Zn0eJ_75g9J3a"&gt;&lt;field name="OP"&gt;LT&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="dynamicData" id="PJStM{w|htYf4!vI`,g~"&gt;&lt;field name="select"&gt;ph&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="math_number" id="[sVvUPW)zQX@YwzW#Vep"&gt;&lt;field name="NUM"&gt;7&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="logic_operation" id="(t)6*2jwl#=G9HX~T=n)"&gt;&lt;field name="OP"&gt;OR&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="logic_compare" id="p^;1=wTP+LaS76xn~6@Y"&gt;&lt;field name="OP"&gt;GT&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="dynamicData" id="+NmWdu@K6jhve|q8|`FX"&gt;&lt;field name="select"&gt;ph&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="math_number" id="GIR4bHv,??k#f~@BqA0x"&gt;&lt;field name="NUM"&gt;8&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="logic_operation" id="k|BDR.rc2aOHb,J?T7pW"&gt;&lt;field name="OP"&gt;OR&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="logic_compare" id="Ntv3D[`wdUH|{UYOP/l9"&gt;&lt;field name="OP"&gt;LT&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="dynamicData" id="q_%KCY.RJ,{bE0yjA_0T"&gt;&lt;field name="select"&gt;orp&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="math_number" id="|@dQ1Kd[L!Au%rr*jV;L"&gt;&lt;field name="NUM"&gt;550&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="logic_compare" id="t~S[Uv4=UZTWgPjiWHpy"&gt;&lt;field name="OP"&gt;GT&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="dynamicData" id="Cdi.I^w-dj*oiuOTn=EW"&gt;&lt;field name="select"&gt;orp&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="math_number" id=")=*MEqsSCj#_[qP,P1k2"&gt;&lt;field name="NUM"&gt;800&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;statement name="DO0"&gt;&lt;block type="variables_set" id="^Qy_[7CpDpO4:5WH6nG{"&gt;&lt;field name="VAR"&gt;warning&lt;/field&gt;&lt;value name="VALUE"&gt;&lt;block type="text" id="/+#U@(u+*Ue_Tb)F=(Si"&gt;&lt;field name="TEXT"&gt; Qualit&eacute; de l''eau &agrave; surveiller!&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/statement&gt;&lt;next&gt;&lt;block type="controls_if" id="mjg}obV4qWmFOCr;_kyE"&gt;&lt;value name="IF0"&gt;&lt;block type="logic_operation" id="RJ`RqFh?S*H*u[QCOQ3b"&gt;&lt;field name="OP"&gt;AND&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="logic_compare" id="q(38HPVzUGd/L9l#kG3]"&gt;&lt;field name="OP"&gt;LT&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="dynamicData" id="t#rVDMw0Nnk)PlzAAb^#"&gt;&lt;field name="select"&gt;temperature&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="math_number" id=";eLCuig+S`t_U():q(n4"&gt;&lt;field name="NUM"&gt;3&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="logic_compare" id=")_iDemA4_OJt(sQ?Nf-+"&gt;&lt;field name="OP"&gt;EQ&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="getcommand" id="}dhFHj)[=#{U`#r*h8F3"&gt;&lt;field name="command"&gt;filtration&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="on_off" id="#@1e95s%teNgQI6g%Cq8"&gt;&lt;field name="command"&gt;Off&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;statement name="DO0"&gt;&lt;block type="math_change" id="?Ud^?Eb[6vgP(vgA|P1a"&gt;&lt;field name="VAR"&gt;memoire["gel"]&lt;/field&gt;&lt;value name="DELTA"&gt;&lt;block type="math_number" id="B={-O/oWm0r(A7?aKVg7"&gt;&lt;field name="NUM"&gt;1&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;next&gt;&lt;block type="controls_if" id="A/n7%qmmtl0I}yiRan^U"&gt;&lt;value name="IF0"&gt;&lt;block type="logic_compare" id="0OJ7Xa_Cbqh{a#xV(72s"&gt;&lt;field name="OP"&gt;GT&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="variables_get" id=":}CNfja3(sS%+5.](l0-"&gt;&lt;field name="VAR"&gt;memoire["gel"]&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="math_number" id="bgG;3d;dJ.w[3LFFA?zW"&gt;&lt;field name="NUM"&gt;2&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;statement name="DO0"&gt;&lt;block type="variables_set" id="-c_=#Oiqem;[BUnyE3;c"&gt;&lt;field name="VAR"&gt;memoire["gel"]&lt;/field&gt;&lt;value name="VALUE"&gt;&lt;block type="math_number" id=",g^Cw7qc+T0ZxZp^Ck1R"&gt;&lt;field name="NUM"&gt;0&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;next&gt;&lt;block type="variables_set" id=";CNrEXV4b*`oV3O{:=:u"&gt;&lt;field name="VAR"&gt;warning&lt;/field&gt;&lt;value name="VALUE"&gt;&lt;block type="text_join" id="L7,N#u6?rBQN|7,6h6G("&gt;&lt;mutation items="2"&gt;&lt;/mutation&gt;&lt;value name="ADD0"&gt;&lt;block type="variables_get" id="R!w~b3!K8at,oAdp##Of"&gt;&lt;field name="VAR"&gt;warning&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="ADD1"&gt;&lt;block type="text" id="=/JbK,9YM^XnJ,DEwK5e"&gt;&lt;field name="TEXT"&gt; Attention au risque de gel!&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/statement&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/statement&gt;&lt;next&gt;&lt;block type="controls_if" id="v-4oFlzCQ7zqJ%B@KN=l"&gt;&lt;value name="IF0"&gt;&lt;block type="logic_compare" id="AQeTNB`E]9.)-5q2fiV0"&gt;&lt;field name="OP"&gt;LT&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="dynamicData" id="NRvvRCJJ(`c3l(3Z30A]"&gt;&lt;field name="select"&gt;temperature&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="math_number" id="~G,;d+.ix_I?-Tl2-Z:W"&gt;&lt;field name="NUM"&gt;15&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;statement name="DO0"&gt;&lt;block type="math_change" id="uw3]y!^Vs:VJRiGHHrFu"&gt;&lt;field name="VAR"&gt;memoire["temperature"]&lt;/field&gt;&lt;value name="DELTA"&gt;&lt;block type="math_number" id="ERMLLSaquOgNg.-x#VVf"&gt;&lt;field name="NUM"&gt;1&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;next&gt;&lt;block type="controls_if" id="3MX3?I`v=RDR3RJ]`5^i"&gt;&lt;value name="IF0"&gt;&lt;block type="logic_compare" id="Z{7`FJ+_vFiZ/`q1k_Vl"&gt;&lt;field name="OP"&gt;GT&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="variables_get" id="|Qs_1Vv31gwNtM:45DsP"&gt;&lt;field name="VAR"&gt;memoire["temperature"]&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="math_number" id="m@%;R:`mNrB9t*q%uWz!"&gt;&lt;field name="NUM"&gt;2&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;statement name="DO0"&gt;&lt;block type="variables_set" id="ll7*WBZW5N7v[2l({.w+"&gt;&lt;field name="VAR"&gt;memoire["temperature"]&lt;/field&gt;&lt;value name="VALUE"&gt;&lt;block type="math_number" id="U)i;s(_s.p%ApI-=?vMd"&gt;&lt;field name="NUM"&gt;0&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;next&gt;&lt;block type="variables_set" id="E#jU+0_@G))b3tRL}|fM"&gt;&lt;field name="VAR"&gt;warning&lt;/field&gt;&lt;value name="VALUE"&gt;&lt;block type="text_join" id=")(H^@jZKdq@F@8]K+9f("&gt;&lt;mutation items="2"&gt;&lt;/mutation&gt;&lt;value name="ADD0"&gt;&lt;block type="variables_get" id="7v)bNI2r}nG/10UXIrTh"&gt;&lt;field name="VAR"&gt;warning&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="ADD1"&gt;&lt;block type="text" id="t2JxAV}5;quk^K~^G)d2"&gt;&lt;field name="TEXT"&gt; Temp&eacute;rature basse, arr&ecirc;t traitement!&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/statement&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/statement&gt;&lt;next&gt;&lt;block type="message" id="3v)coXu:P-`|9Uy!MFQy"&gt;&lt;field name="command"&gt;log&lt;/field&gt;&lt;value name="NAME"&gt;&lt;block type="variables_get" id=",hFN#~!V0CV+oQ}q?L,6"&gt;&lt;field name="VAR"&gt;mesures&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;next&gt;&lt;block type="controls_if" id=".@u@gj%J2rVK8,sG5Bfj"&gt;&lt;value name="IF0"&gt;&lt;block type="logic_compare" id="7}vGVkmp2T#@W;IuZ8r,"&gt;&lt;field name="OP"&gt;NEQ&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="variables_get" id=")SMXpM3Gjm7:X|)]2~%Q"&gt;&lt;field name="VAR"&gt;warning&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="text" id="e2E2I1@:|XhCtibMxF-s"&gt;&lt;field name="TEXT"&gt;.&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;statement name="DO0"&gt;&lt;block type="message" id="!x,60kKlxJj).,GUVJiG"&gt;&lt;field name="command"&gt;email&lt;/field&gt;&lt;value name="NAME"&gt;&lt;block type="text_join" id="!@7ErM]Z8Pq^5S}oSoYM"&gt;&lt;mutation items="2"&gt;&lt;/mutation&gt;&lt;value name="ADD0"&gt;&lt;block type="variables_get" id="eMdOq:vxm9Z%4MduC_9y"&gt;&lt;field name="VAR"&gt;mesures&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="ADD1"&gt;&lt;block type="variables_get" id="r*+lkXZ*RIZ!@9MWNLw5"&gt;&lt;field name="VAR"&gt;warning&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/statement&gt;&lt;next&gt;&lt;block type="variables_set" id="76m3i`]X^D-rI)#=p#HX"&gt;&lt;field name="VAR"&gt;info&lt;/field&gt;&lt;value name="VALUE"&gt;&lt;block type="weburl" id="cVnOBP0u+1/c#TT=K~rz"&gt;&lt;value name="url"&gt;&lt;block type="text_join" id="r8;!5H5GwoJo~(6boA*T"&gt;&lt;mutation items="2"&gt;&lt;/mutation&gt;&lt;value name="ADD0"&gt;&lt;block type="text" id="L?-3gbm;wV?Qs*kxMHTm"&gt;&lt;field name="TEXT"&gt;http://admin:Quintal74604@domoticz.infrafast.com/json.htm?type=command&amp;amp;param=udevice&amp;amp;idx=27&amp;amp;nvalue=0&amp;amp;svalue=&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="ADD1"&gt;&lt;block type="dynamicData" id="}*]4+T`|rDV8bTyLoUx|"&gt;&lt;field name="select"&gt;ph&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="statuskey"&gt;&lt;block type="text" id="m+F#x+e#3LgVBed;PLro"&gt;&lt;field name="TEXT"&gt;status&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;next&gt;&lt;block type="variables_set" id="_Y1#qAcI!CTNQ[W1jbBM"&gt;&lt;field name="VAR"&gt;info&lt;/field&gt;&lt;value name="VALUE"&gt;&lt;block type="weburl" id="Y#a|FHe8|rlAm#st*r?L"&gt;&lt;value name="url"&gt;&lt;block type="text_join" id="#WMs;kd9m^7Ecj-NJ?N)"&gt;&lt;mutation items="2"&gt;&lt;/mutation&gt;&lt;value name="ADD0"&gt;&lt;block type="text" id="kNWO~gJWT+I7GFZL5W/y"&gt;&lt;field name="TEXT"&gt;http://admin:Quintal74604@domoticz.infrafast.com/json.htm?type=command&amp;amp;param=udevice&amp;amp;idx=28&amp;amp;nvalue=0&amp;amp;svalue=&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="ADD1"&gt;&lt;block type="dynamicData" id="lM_3*D*);pd-)U2/F%X2"&gt;&lt;field name="select"&gt;temperature&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="statuskey"&gt;&lt;block type="text" id="{E0+J}?/[3fLHT6MxMcc"&gt;&lt;field name="TEXT"&gt;status&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;next&gt;&lt;block type="variables_set" id="r-*[kvDB(%g9tk2MtA1O"&gt;&lt;field name="VAR"&gt;info&lt;/field&gt;&lt;value name="VALUE"&gt;&lt;block type="weburl" id="OJa{,ExE3Qn/_wW81~@e"&gt;&lt;value name="url"&gt;&lt;block type="text_join" id="{,IU`[Q5Z,[#QR:@+|Gc"&gt;&lt;mutation items="2"&gt;&lt;/mutation&gt;&lt;value name="ADD0"&gt;&lt;block type="text" id="=^).Bam^_jIOs?y}=e,V"&gt;&lt;field name="TEXT"&gt;http://admin:Quintal74604@domoticz.infrafast.com/json.htm?type=command&amp;amp;param=udevice&amp;amp;idx=29&amp;amp;nvalue=0&amp;amp;svalue=&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="ADD1"&gt;&lt;block type="dynamicData" id="`Od,A3J[Fz[C|3PS#kz%"&gt;&lt;field name="select"&gt;orp&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="statuskey"&gt;&lt;block type="text" id="o-DBg7U{jQbL4xIEv)`H"&gt;&lt;field name="TEXT"&gt;status&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;next&gt;&lt;block type="variables_set" id="|6cNZTg*2T*+L#2%UYn6"&gt;&lt;field name="VAR"&gt;info&lt;/field&gt;&lt;value name="VALUE"&gt;&lt;block type="weburl" id="cc_Bp/yJ=;|v6zM~#~U{"&gt;&lt;value name="url"&gt;&lt;block type="text_join" id="F1yq#Y~5.x_C:B,U6?!["&gt;&lt;mutation items="2"&gt;&lt;/mutation&gt;&lt;value name="ADD0"&gt;&lt;block type="text" id="o7]gp2Cr*8WEGv;Sf0fo"&gt;&lt;field name="TEXT"&gt;http://admin:Quintal74604@domoticz.infrafast.com/json.htm?type=command&amp;amp;param=switchlight&amp;amp;idx=30&amp;amp;switchcmd=&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="ADD1"&gt;&lt;block type="getcommand" id="k77Nc*q7P:9%0aq}A?Jx"&gt;&lt;field name="command"&gt;filtration&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="statuskey"&gt;&lt;block type="text" id="f(rDxsu`z*[/ik,V6.id"&gt;&lt;field name="TEXT"&gt;status&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;next&gt;&lt;block type="variables_set" id="_:akWyeg@RE9[`~P=A#v"&gt;&lt;field name="VAR"&gt;info&lt;/field&gt;&lt;value name="VALUE"&gt;&lt;block type="weburl" id="prJ1=;G|@21z6n0,w}9i"&gt;&lt;value name="url"&gt;&lt;block type="text_join" id="h:G]5_pd#.t^Gi9C53g["&gt;&lt;mutation items="2"&gt;&lt;/mutation&gt;&lt;value name="ADD0"&gt;&lt;block type="text" id="Iqwd~OheZxv5ose-l_@K"&gt;&lt;field name="TEXT"&gt;http://admin:Quintal74604@domoticz.infrafast.com/json.htm?type=command&amp;amp;param=switchlight&amp;amp;idx=31&amp;amp;switchcmd=&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="ADD1"&gt;&lt;block type="getcommand" id=")QTC](Rk;Z0wXI5{zBNZ"&gt;&lt;field name="command"&gt;traitement1&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="statuskey"&gt;&lt;block type="text" id="cTqo~O;TuV|YStP;b`A%"&gt;&lt;field name="TEXT"&gt;status&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;next&gt;&lt;block type="controls_if" id="cCvaH/{o7KC^{qnoi)l]"&gt;&lt;value name="IF0"&gt;&lt;block type="logic_compare" id="Db*r{ISF{)IMVg}8|wpC"&gt;&lt;field name="OP"&gt;EQ&lt;/field&gt;&lt;value name="A"&gt;&lt;block type="dynamicData" id=",!W*o0u.bTIQErJjY;{R"&gt;&lt;field name="select"&gt;hour&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="B"&gt;&lt;block type="math_number" id="(Yd`=H?r)(s-Gve=kp*X"&gt;&lt;field name="NUM"&gt;20&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;statement name="DO0"&gt;&lt;block type="message" id="3?H11O[xW`m#i0a;=%T^"&gt;&lt;field name="command"&gt;email&lt;/field&gt;&lt;value name="NAME"&gt;&lt;block type="text_join" id="cA{LNv]nu@l]WmSDdz}?"&gt;&lt;mutation items="2"&gt;&lt;/mutation&gt;&lt;value name="ADD0"&gt;&lt;block type="text" id="V5MV/3rr`%YNn)sVg6mn"&gt;&lt;field name="TEXT"&gt;Rapport journalier &lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;value name="ADD1"&gt;&lt;block type="variables_get" id="Nc3Ad4k3-C`:%5/I2k}E"&gt;&lt;field name="VAR"&gt;mesures&lt;/field&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/value&gt;&lt;/block&gt;&lt;/statement&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/next&gt;&lt;/block&gt;&lt;/xml&gt;', 'warning = ''.'';\nmesures = table.concat({''Ph: '', ph, '', ORP: '', orp, '', temp&eacute;rature:'', temperature});\nif (get(filtration)) == (''On'') and ((ph) &lt; 7 or ((ph) &gt; 8 or ((orp) &lt; 550 or (orp) &gt; 800))) then\n  warning = '' Qualit&eacute; de l\\''eau &agrave; surveiller!'';\nend\nif (temperature) &lt; 3 and (get(filtration)) == (''Off'') then\n  memoire[''gel''] = memoire[''gel''] + 1\n  if (memoire[''gel'']) &gt; 2 then\n    memoire[''gel''] = 0;\n    warning = warning .. '' Attention au risque de gel!'';\n  end\nend\nif (temperature) &lt; 15 then\n  memoire[''temperature''] = memoire[''temperature''] + 1\n  if (memoire[''temperature'']) &gt; 2 then\n    memoire[''temperature''] = 0;\n    warning = warning .. '' Temp&eacute;rature basse, arr&ecirc;t traitement!'';\n  end\nend\nlog((mesures));\nif (warning) ~= ''.'' then\n  email((mesures .. warning));\nend\ninfo = web((''http://admin:Quintal74604@domoticz.infrafast.com/json.htm?type=command&amp;param=udevice&amp;idx=27&amp;nvalue=0&amp;svalue='' .. ph),''status'');\ninfo = web((''http://admin:Quintal74604@domoticz.infrafast.com/json.htm?type=command&amp;param=udevice&amp;idx=28&amp;nvalue=0&amp;svalue='' .. temperature),''status'');\ninfo = web((''http://admin:Quintal74604@domoticz.infrafast.com/json.htm?type=command&amp;param=udevice&amp;idx=29&amp;nvalue=0&amp;svalue='' .. orp),''status'');\ninfo = web((''http://admin:Quintal74604@domoticz.infrafast.com/json.htm?type=command&amp;param=switchlight&amp;idx=30&amp;switchcmd='' .. get(filtration)),''status'');\ninfo = web((''http://admin:Quintal74604@domoticz.infrafast.com/json.htm?type=command&amp;param=switchlight&amp;idx=31&amp;switchcmd='' .. get(traitement1)),''status'');\nif (hour) == 20 then\n  email((''Rapport journalier '' .. mesures));\nend\n');

--
-- Index pour les tables exportées
--

--
-- Index pour la table `scripts`
--
ALTER TABLE `scripts`
 ADD PRIMARY KEY (`id`);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
